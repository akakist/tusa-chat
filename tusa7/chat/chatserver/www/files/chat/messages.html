<HTML>
<HEAD>
<META HTTP-EQUIV="PRAGMA" CONTENT="no-cache">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1251">
<TITLE>messages</TITLE>
</head>

<LINK rel="stylesheet" type="text/css" href="/css/main.css">

<style>

TD {vertical-align: Top; FONT-FAMILY: Verdana, Arial; FONT-SIZE: 9pt; background-color: transparent;}
</style>

<script>
<!--
var nav=navigator.appName == 'Netscape';

//var ftime=0;
var ftime=0;
var m_v=0;
var s_s=0;
var nick;
var cid;

function do_hide_menu(n)
{
	if(!m_v) return;
	m_v=0;
	parent.scr=s_s;
	document.all['menu'].style.visibility="hidden";
	if(n!=1) DS();
}

function do_show_menu(obj)
{
        if(m_v) do_hide_menu(1);
	if(event.srcElement.className=='nick'){
		nick=event.srcElement.innerHTML;
		cid=0;
		for(var i in parent.UsrList){
			if(parent.UsrList[i].n==nick){
				cid=parent.UsrList[i].id;
				break;
			}
		}
		s_s=parent.scr;
		parent.scr=false;
		mn=document.all['menu'];
		var rightedge=document.body.clientWidth-event.clientX;
		var bottomedge=document.body.clientHeight-event.clientY;
		if (rightedge<mn.offsetWidth){
			mn.style.left=document.body.scrollLeft+event.clientX-mn.offsetWidth;
		}else{
			mn.style.left=document.body.scrollLeft+event.clientX-10;
		}
		if (bottomedge<mn.offsetHeight){
			mn.style.top=document.body.scrollTop+event.clientY-mn.offsetHeight;
		}else{
			mn.style.top=document.body.scrollTop+event.clientY-40;
		}
		document.all["menunick"].innerHTML='&nbsp;&nbsp;&nbsp;'+nick+'&nbsp;&nbsp;&nbsp;';
		mn.style.visibility="visible";
		m_v=1;
	}else{
		return true;
	}
	return false;
}

function mOvr(src)
{
	src.style.cursor='hand';
	src.style.backgroundColor="#999999";
}
function mOut(src)
{
	src.style.cursor='default';
	src.style.backgroundColor="#ffffff";
}
function mClk(src)
{
	code=src.cmd;
	if(code==1){
		parent.parent.Answer(nick,1);
		return;
	}
	if(code==2 /*&& cid!=0*/){
		parent.userinfoNI(nick);
		return;
	}
	if(code==3 /*&& cid!=0*/){
		parent.IgnoreUser(cid,nick);
		return;
	}
	if(code==4){
		parent.KickUser(cid,nick);
		return;
	}
	w=document.f;
	if(code==8){
		s='маты';
		if(s==null) return;
		if(code==4) w.cmd.value='kick';
		w.id.value=cid;
		w.nick.value=nick;
		w.msg.value=s;
		w.submit();
		return;
	}
	w=document.f;
	if(code==9){
		s='флуд';
		if(s==null) return;
		if(code==4) w.cmd.value='kick';
		w.id.value=cid;
		w.nick.value=nick;
		w.msg.value=s;
		w.submit();
		return;
	
	}
	w=document.f;
	if(code==5 || code==6 || code==7){
		s=prompt(name+' будет забанен за ?','');
		if(s==null) return;
		if(code==5) w.cmd.value='bi';
		if(code==6) w.cmd.value='bn';
		if(code==7) w.cmd.value='bl';
		w.id.value=cid;
		w.nick.value=nick;
		w.msg.value=s;
		w.submit();
		return;
	}
}

function hide_msgs(obj,n)
{
	var st=document.styleSheets[0].rules[n].style;
	if(parent.h_msg[n]==0){
		st.display='none';
        if(obj) obj.className='bp';
        parent.h_msg[n]=1;
	}else{
		if(obj) obj.className='';
		st.display="block";
        parent.h_msg[n]=0;
	}
	ftime=1;
	if(obj) window.top.addmessage.document.SendForm.msgbox.focus();
}

function init_msg()
{
	if(parent.h_msg[7]==1) {
		parent.h_msg[7]=0;
		hide_msgs(null,7);
	}
	if(parent.h_msg[8]==1) {
		parent.h_msg[8]=0;
		hide_msgs(null,8);
	}
}



function DS()
{
	if(parent.scr==1)
	{
		if(!nav){
			scroll(1,10000000);
		}
		scroll(1,10000000);
	}
}

function os()
{
	window.status='';
	return true;
}

function bl()
{
    if(parent.ex==0){
    	parent.connected=false;
		alert('Внимание! Связь с сервером потеряна.');
	}	
}
window.defaultStatus='Russian America Chat';
//-->
</SCRIPT>
<!--BODY  class=as OnLoad="bl();" OnMouseMove="parent.mm(0);" topmargin=1>  leftmargin=1 RIGHTMARGIN=1 style=" margin-left: 0.5em;"-->
<BODY OnLoad="bl();" OnMouseMove="parent.mm(0);" topmargin=1 leftmargin=0 RIGHTMARGIN=0 class=as oncontextmenu="return do_show_menu(this);" onclick="return do_hide_menu()" style="margin-right: 0px; margin-left: 0px">

<script>
	parent.connected=true;
	parent.set_topic('~topic2~');
</script>
<div id=menu style="visibility: hidden; position: absolute">
<table class=border>
<form name="f" action="/admin/userlist_command" method="POST" target="hidden">
<input type=hidden name="cmd" value="">
<input type=hidden name="id" value="">
<input type=hidden name="nick" value="">
<input type=hidden name="sort" value="~sort~">
<input type=hidden name="msg" value="">
</form>
<tr><td align=center><div id=menunick class=nick></div></td></tr>
<tr><td cmd=1 onmouseover="mOvr(this);" onmouseout="mOut(this);" onclick="mClk(this);">В приват</td></tr>
<tr><td cmd=2 onmouseover="mOvr(this);" onmouseout="mOut(this);" onclick="mClk(this);">Информация</td></tr>
<tr><td><hr size=1 width=100%></td></tr>
<tr><td cmd=3 onmouseover="mOvr(this);" onmouseout="mOut(this);" onclick="mClk(this);">В игнор</td></tr>
<script>
		if(parent.level>=6){
		document.write('<tr><td cmd=4 onmouseover="mOvr(this);" onmouseout="mOut(this);" onclick="mClk(this);">Кик(причина)</td></tr>');
		document.write('<tr><td cmd=9 onmouseover="mOvr(this);" onmouseout="mOut(this);" onclick="mClk(this);">Кик(флуд)</td></tr>');		
		document.write('<tr><td cmd=8 onmouseover="mOvr(this);" onmouseout="mOut(this);" onclick="mClk(this);">Кик(маты)</td></tr>');
		document.write('<tr><td cmd=5 onmouseover="mOvr(this);" onmouseout="mOut(this);" onclick="mClk(this);">Кик+IP бан</td></tr>');
		}
		if(parent.level>=7){
		document.write('<tr><td cmd=6 onmouseover="mOvr(this);" onmouseout="mOut(this);" onclick="mClk(this);">Кик+ник бан</td></tr>');
		document.write('<tr><td cmd=7 onmouseover="mOvr(this);" onmouseout="mOut(this);" onclick="mClk(this);">Кик+логин бан</td></tr>');
	}
</script>
</table>
</div>

<!--table><tr><td></td></tr>
<tr><td-->
~top~
<TABLE border=0 id=hs><TR><TD><font color=darkblue>*** Топик комнаты: <b>~topic~</b></TD></TR></TABLE>
<TABLE border=0 id=hs><TR><TD><font color=darkblue>*** Поставил(а) <b>~who~</b>, ~time~</b></TD></TR></TABLE>
~etop~
